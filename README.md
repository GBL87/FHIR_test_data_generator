# FHIR-resource-data-generator
This is a tool to generate .fsh (FHIR Shorthand) files from a CSV data set, which can be used as base files to generate FHIR compliant resource files afterwards with SUSHI (SUSHI Unshortens Short Hand Inputs). Ultimately SUSHI validates and creates JSON FHIR resource files to be used in API calls.

## Prerequisites
- Having SUSHI installed on your local machine
- Having NodeJS installed on your local machine
- After cloning the project, execute `npm install`

## Steps to generate .fsh files
1. Alter the data set in the file ./assets/data.csv according to your needs.
Values and amount of records may vary.
2. In your command prompt/terminal, navigate to the repo's directory.
3. Execute the following command:
`node script.js`
4. The genereted data can be found under the directory `generated_fsh_files`

## Steps to generate valid FHIR .json resource files from the generated .fsh files

### Pre-requisites:
- Ensure you have JAVA (JDK) installed 
- Install Jekyll (https://jekyllrb.com/docs/installation) - depends on Ruby 
- Install sushi (https://fshschool.org/docs/sushi/installation): 
-- you need to install node.js if you don’t have it (https://nodejs.org/) 
-- install sushi by running the command line: npm install -g fsh-sushi 
-- Windows users: If the command “sushi -v” gives you a permission error, you may
-- need to update your settings:  https:/go.microsoft.com/fwlink/?LinkID=135170  
-- Run this command `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser` – this allows the current user to execute of scripts that are originating from a remote location - 

### Generate ImplementationGuid folder
1. Navigate to the desired project folder where the json files should be generated (in the Command Promt / shell)
2. Execute the command `sushi --init`
3. Pass the desired parameters in the initialization wizard:
-- Name (Default: ExampleIG): [Enter desired name here, press enter to skip]
-- Id (Default: fhir.example): [Enter desired Id here, press enter to skip]
-- Canonical (Default: http://example.org): [Enter desired site here, press enter to skip]
-- Status (Default: draft): [Enter desired status here, press enter to skip]
-- Version (Default: 0.1.0): [Enter Version site here, press enter to skip]
-- Publisher Name (Default: Example Publisher): [Enter desired Publisher name here, press enter to skip]
-- Publisher Url (Default: http://example.org/example-publisher):  [Enter desired Publisher URL here, press enter to skip]
-- Initialize SUSHI project in /Users/[CurrentUser]/[Name]? [y/n]: Y

### JSON generation
1. Place the generated .fsh files in the folder `./[ChosenIGName]/input/fsh`
2. In the IG root directory generated by the `sushi --init`command, enter (in the Command Promt / shell) the command `sushi .`. Sushi will now generate JSON files in the folder `./[ChosenIGName]/fsh-generated/resources`

